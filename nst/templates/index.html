    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- Font Awesome cdn -->
        <script src="https://kit.fontawesome.com/ca62398c98.js" crossorigin="anonymous"></script>
        <!-- Material Icons Collection -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="icon" href="https://raw.githubusercontent.com/google/material-design-icons/master/image/1x_web/ic_brush_white_48dp.png">

        <title>Art.ai</title>

        <!-- Custom CSS -->
        <style>
            body {
                background-image: url('https://www.itl.cat/pngfile/big/157-1572191_hd-wallpapers-for-website-background.jpg');
                background-size: cover;
                background-position: center;
            }
            .row {
                margin-top: 100px;
            }
            .card, .card-action, .card-image{
                border-radius: 25px !important;
            }
            img{
                display: 'none';
                width: auto !important;
                max-width: 100%;
                max-height: 150px;
                margin-left: auto;
                margin-right: auto;
            }
        </style>
    </head>
    <body>
        <!-- NavBar -->
        <div class='navbar-fixed'>
            <nav class='transparent'>
                <div class="nav-wrapper">
                    <div class="container">
                        <a href="#" class="brand-logo"><i class="material-icons">brush</i>Art.ai</a>
                        <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                        <ul class="right hide-on-med-and-down">
                            <li><a href="#">About</a></li>
                            <li><a href="#">Code</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <!-- Mobile SideBar -->
        <ul id="mobile-demo" class="sidenav">
            <li><a href="#">About</a></li>
            <li><a href="#">Code</a></li>
        </ul>

        <form method='POST' action=''>
            <!-- Main Section -->
            <div class='container'>
                <div class='row valign-wrapper'>
                    <!-- Content Image -->
                    <div class='col s12 m4'>
                        <div class="card hoverable green lighten-2">
                            <div class="card-image cimg center-align">
                                <input type="file" accept="image/*" id="contentimage" name="cimg" class="hide" onchange="loadfile(event, 'cimg')">
                                <img id="cimg" class="materialboxed responsive-img" />
                            </div>
                            <div class="card-content center">
                                <span class="card-title">Content Image</span>
                                <h6>The image we want to transfer a style to!</h6>
                            </div>
                            <div class="card-action center">
                                <a class="waves-effect waves-light btn green darken-2 z-depth-5" onclick="$('#contentimage').click();">
                                    <i class="material-icons left">add_a_photo</i>
                                    Browse
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Style Image -->
                    <div class='col s12 m4'>
                        <div class="card hoverable red lighten-2">
                            <div class="card-image simg center-align">
                                <input type="file" accept="image/*" id="styleimage" name="simg" class="hide" onchange="loadfile(event, 'simg')">
                                <img id="simg" class="materialboxed responsive-img" />
                            </div>
                            <div class="card-content center">
                                <span class="card-title">Style Image</span>
                                <h6>The image we want to transfer the style from!</h6>
                            </div>
                            <div class="card-action center">
                                <a class="waves-effect waves-light btn red darken-2 z-depth-5" onclick="$('#styleimage').click();">
                                    <i class="material-icons left">add_a_photo</i>
                                    Browse
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Output Image -->
                    <div class='col s12 m4'>
                        <div class="card hoverable cyan lighten-2">
                            <div class="card-image center-align"></div>
                            <div class="card-content center">
                                <span class="card-title">Output Image</span>
                                <h6>The image that contains the final result!</h6>
                            </div>
                            <div class="card-action center">
                                <a class="waves-effect waves-light btn-floating cyan darken-2 z-depth-5"><i class="material-icons">settings</i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Execute Command -->
            <div class="center">
                <a class="waves-effect waves-light btn orange darken-2 z-depth-5" onclick="transfer()"><i class="material-icons left">play_arrow</i>Run</a>
            </div>
        </form>

        <!-- Minified jquery cdn-->
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <!-- socketio cdn -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>

        <!-- Custom Jquery script -->
        <script>
            $(document).ready(function(){
                $('.sidenav').sidenav();
                socket = io();
                socket.on('connect', function(){
                    console.log('Connected!');
                });

            });

            var loadfile = function(event, pos){
                var img = $('#' + pos);
                img.attr('src', URL.createObjectURL(event.target.files[0]));
                img.css('display', 'inline-block');
                img.materialbox();
                $('.' + pos).css('height', '150px');
            };

            // Reference: https://medium.com/a-layman/send-images-to-the-flask-server-and-show-images-on-the-browser-bcdfb81d16cd
            var transfer = function(){
                var content_image = $('#contentimage')[0].files[0];
                var style_image = $('#styleimage')[0].files[0];

                var contentFileReader = new FileReader();
                console.log(content_image)
                contentFileReader.readAsDataURL(content_image)              // DataURL ( Base64)
                // contentFileReader.readAsArrayBuffer(content_image);      // ArrayBuffer

                contentFileReader.onload = () => {
                    var styleFileReader = new FileReader();
                    styleFileReader.readAsDataURL(style_image)

                    styleFileReader.onload = () => {
                        socket.emit('data', {
                            'image1': {
                                'name': content_image.name, 
                                'type': content_image.type, 
                                size: content_image.size, 
                                'binary': contentFileReader.result
                            },
                            'image2': {
                                'name': style_image.name, 
                                'type': style_image.type, 
                                'size': style_image.size, 
                                'binary': styleFileReader.result
                            }
                        })
                    }
                }
            };
        </script>
    </body>
</html>